<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Renewal Form</title>
    <style>
        /* Bus Pass Theme - Application Form */
        body {
            font-family: Arial, sans-serif;
            background: linear-gradient(to right, #4facfe, #00f2fe);
            margin: 0;
            padding: 0;
        }
        
        header {
            background: #007bff;
            color: white;
            padding: 15px;
            text-align: center;
            font-size: 22px;
            font-weight: bold;
        }
        
        .container {
            background: #fff;
            padding: 30px;
            margin: 30px auto;
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
            text-align: left;
            width: 50%;
        }
        
        h2 {
            color: #007bff;
            text-align: center;
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            font-weight: bold;
            margin-top: 10px;
        }
        
        input, select, textarea {
            width: 100%;
            padding: 10px;
            margin: 5px 0 15px 0;
            border: 1px solid #ccc;
            border-radius: 5px;
            font-size: 14px;
        }
        
        button {
            width: 100%;
            background-color: #007bff;
            color: white;
            border: none;
            padding: 10px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: 0.3s;
        }
        
        button:hover {
            background-color: #0056b3;
        }
        
        footer {
            background: #007bff;
            color: white;
            text-align: center;
            padding: 10px;
            position: fixed;
            bottom: 0;
            width: 100%;
            font-size: 14px;
        }
        .qr-code-container {
            text-align: center;
            margin: 20px 0;
        }

        .qr-code-container img {
            width: 150px; /* You can adjust the size */
            height: 150px;
        }
    </style>
</head>
<body>
    <header>
        <h1>Renew Bus Pass</h1>
    </header>

    <div class="container">
        <h2>Pass Renewal Form</h2>
        <form method="POST" action="http://localhost:3001/renew" id="renewalForm" enctype="multipart/form-data">
            <div class="form-group">
                <label for="fullName">Full Name:</label>
                <input type="text" id="fullName" name="fname" required>
            </div>
            <div class="form-group">
                <label for="email">Email:</label>
                <input type="email" id="email" name="email" required>
            </div>
            <div class="form-group">
                <label for="phone">Phone Number:</label>
                <input type="tel" id="phone" name="phone" pattern="[0-9]{10}" maxlength="10" onkeypress="return (event.charCode !=8 && event.charCode ==0 || (event.charCode >= 48 && event.charCode <= 57))" required>
            </div>
            <div class="form-group">
                <label for="dob">Date of Birth</label>
                <input type="date" id="dob" name="dob" required>
            </div>

            <div class="form-group">
                <label for="gender">Gender</label>
                <select id="gender" name="gender" required>
                    <option value="">Select</option>
                    <option value="male">Male</option>
                    <option value="female">Female</option>
                    <option value="other">Other</option>
                </select>
            </div>

            <div class="form-group">
                <label for="address">Address</label>
                <textarea id="address" name="address" rows="3" required></textarea>
            </div>
            <div>
                <label for="source">Source</label>
                <select id="source" name="source">
                    <option value=""> Select Source</option>
                    <option value="Narsampet">Narsampet</option>
                    <option value="Laknepally">Laknepally</option>
                    <option value="Hanmakonda">Hanmakonda</option>
                    <option value="Girnibavi">Girnibavi</option>
                    <option value="Kommala">Kommala</option>
                     <option value="Dharmaram">Dharmaram</option>
                    <option value="Warangal">Warangal</option>
                </select>
            </div>
            <div>
                <label for="destination">Destination</label>
                <select id="destination" name="destination">
                    <option value="">Select College</option>
                    <option value="BITS">Balaji Institute of Technology</option>
                    <option value="Vaagdevi">Vaagdevi Institute of Technology</option>
                  <option value="kakatiya">Kakatiya Government Degree & PG College</option>
                    <option value="vivekananda">Vivekananda Government Degree College</option>
                    <option value="JITS">Jayamukhi Institute of Technology</option>
                </select>
            </div>
            <div class="form-group">
                <label for="course">Course</label>
                <input type="text" id="course" name="course" required>
            </div>
            <div class="form-group">
                <label for="year">Year</label>
                <input type="text" id="year" name="year" required>
            </div>
            <div class="form-group">
                <label for="passNumber">Pass Number</label>
                <input type="text" id="passNumber" name="passNumber" required>
            </div>
            <div class="qr-code-container">
                <label for="qrCode">UPI QR Code</label>
                <!-- Replace with the actual path of your QR code image -->
                <img src="qrcode.jpg" alt="UPI QR Code">
            </div>
            <div class="form-group">
                <label for="payment">Screenshot of your Payment</label>
                <input type="file" id="paymentphoto" name="payment" required>
            </div>
    
            <div class="form-group">
                <label for="photo">Upload Passport Size Photo</label>
                <input type="file" id="photo" name="photo" required>
            </div>
    
            <div class="form-group">
                <label for="aadhar">Upload Aadhar Card</label>
                <input type="file" id="aadhar" name="aadhar" required>
            </div>
             <div class="form-group">
                <label for="id-proof">Upload ID Proof</label>
                <input type="file" id="id-proof" name="id-proof" required>
            </div>
    
            <div class="form-group">
                <label for="bonafide">Upload Bonafide</label>
                <input type="file" id="bonafide" name="bonafide" required>
            </div>
            <div class="form-group">
                <label for="date">Expiry Date</label>
                <input type="date" id="date" name="expiryDate" required>
            </div>
            <div class="form-group">
                <label for="renewalPeriod">Renewal Period:</label>
                <select id="renewalPeriod" name="renewalPeriod" required>
                    <option value="monthly">Monthly</option>
                    <option value="quarterly">Quarterly</option>
                    <option value="yearly">Yearly</option>
                </select>
            </div>
            
            <div>
                <label for="amount">Amount (₹)</label>
                <input type="text" id="amount" name="amount" readonly>
                <input type="hidden" id="hiddenAmount" name="amount">
            </div>

            <div class="form-group">
                <button type="button" id="submit">Submit</button>
            </div>
        </form>
    </div>
    <footer>
        <p>&copy; 2025 Bus Pass Management System. All Rights Reserved.</p>
    </footer>

    <script>
        // Sample pricing data based on source, destination, and renewal period
        const passPrices = {
            "BITS": {
                "Warangal": { monthly: 300, quarterly: 550, yearly: 900 },
                "Laknepally": { monthly: 100, quarterly: 350, yearly: 600 },
                "Kommala": { monthly: 150, quarterly: 450, yearly: 700 },
                "Girnibavi": { monthly: 100, quarterly: 250, yearly: 800 },
                "Dharmaram": { monthly: 180, quarterly: 490, yearly: 850 },
                "Hanmakonda": { monthly: 350, quarterly: 600, yearly: 1000 },
                "Narsampet": { monthly: 100, quarterly: 300, yearly: 700 }
            },
            "JITS": {
                "Warangal": { monthly: 350, quarterly: 600, yearly: 950 },
                "Laknepally": { monthly: 150, quarterly: 400, yearly: 650 },
                "Kommala": { monthly: 200, quarterly: 500, yearly: 800 },
                "Girnibavi": { monthly: 200, quarterly: 450, yearly: 800 },
                "Dharmaram": { monthly: 250, quarterly: 580, yearly: 920 },
                "Hanmakonda": { monthly: 400, quarterly: 850, yearly: 1100 },
                "Narsampet": { monthly: 120, quarterly: 350, yearly: 800 }
            } ,

            "Vaagdevi" : {
                "Warangal": { monthly: 100, quarterly: 450, yearly: 700 },
                "Laknepally": { monthly: 200, quarterly: 650, yearly: 850 },
                "Kommala": { monthly: 300, quarterly: 550, yearly: 800 },
                "Girnibavi": { monthly: 350, quarterly: 750, yearly: 800 },
                "Dharmaram": { monthly: 280, quarterly: 490, yearly: 750 },
                "Hanmakonda": { monthly: 120, quarterly: 400, yearly: 600 },
                "Narsampet": { monthly: 400, quarterly: 600, yearly: 1000 }
            },
            "kakatiya": {
                "Warangal": { monthly: 100, quarterly: 450, yearly: 700 },
                "Laknepally": { monthly: 200, quarterly: 650, yearly: 850 },
                "Kommala": { monthly: 300, quarterly: 550, yearly: 800 },
                "Girnibavi": { monthly: 350, quarterly: 750, yearly: 800 },
                "Dharmaram": { monthly: 350, quarterly: 490, yearly: 750 },
                "Hanmakonda": { monthly: 120, quarterly: 400, yearly: 600 },
                "Narsampet": { monthly: 400, quarterly: 600, yearly: 1000 }
            },
            "vivekananda": {
                "Warangal": { monthly: 100, quarterly: 450, yearly: 700 },
                "Laknepally": { monthly: 550, quarterly: 750, yearly: 950 },
                "Kommala": { monthly: 400, quarterly: 650, yearly: 800 },
                "Girnibavi": { monthly: 350, quarterly: 750, yearly: 800 },
                "Dharmaram": { monthly: 280, quarterly: 490, yearly: 750 },
                "Hanmakonda": { monthly: 120, quarterly: 400, yearly: 600 },
                "Narsampet": { monthly: 600, quarterly: 800, yearly: 1200 }
            },
        };
       
    function updateAmount() {
        const source = document.getElementById('source').value;
        const destination = document.getElementById('destination').value;
        const renewalPeriod = document.getElementById('renewalPeriod').value;

        const amount = passPrices[destination]?.[source]?.[renewalPeriod];

        if (amount) {
            document.getElementById('amount').value = '₹' + amount;
            document.getElementById('hiddenAmount').value = amount;
        } else {
            document.getElementById('amount').value = '₹0';
            document.getElementById('hiddenAmount').value = '';
        }
    }

    document.getElementById('source').addEventListener('change', updateAmount);
    document.getElementById('destination').addEventListener('change', updateAmount);
    document.getElementById('renewalPeriod').addEventListener('change', updateAmount);

    // FORM SUBMISSION LOGIC
    document.getElementById('submit').addEventListener('click', function () {
        updateAmount(); // update amount before submission

        const form = document.getElementById('renewalForm');
        const formData = new FormData(form);

        fetch(form.action, {
            method: form.method,
            body: formData
        })
        .then(response => {
            if (response.redirected) {
                window.location.href = response.url;
            } else {
                alert("Something went wrong. Please try again.");
            }
        })
        .catch(err => {
            console.error("Error during form submit:", err);
            alert("Submission failed.");
        });
    });

    // Set default amount when page loads
    updateAmount();

    </script>
</body>
</html>
